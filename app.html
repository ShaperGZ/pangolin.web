<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css"href="ArchProto.css">
    <style>
        .label{
                    color: #FFF;
                    font-family: sans-serif;
                    padding: 2px;
                    background: rgba( 0, 0, 0, .6 );
                }
    </style>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
</head>
<script src="three.min.js"></script>
<script src="controls/TrackballControls.js"></script>
<script src="controls/DragControls.js"></script>
<script src="controls/OrbitControls.js"></script>
<script src="controls/SelectionControls.js"></script>
<script src="controls/TransformControls.js"></script>
<script src="./interpretor.js"></script>
<script src="object_manager.js"></script>
<script src="threejsViewer.js"></script>
<script src="widgets/transform.js"></script>
<script src="utilities.js"></script>
<script src="materials.js"></script>
<script src="tests/test_geometries.js"></script>
<script src="libs/dat.gui/dat.gui.min.js"></script>
<script src="libs/postprocessing/EffectComposer.js"></script>
<script src="libs/postprocessing/RenderPass.js"></script>
<script src="libs/postprocessing/SAOPass.js"></script>
<script src="libs/postprocessing/ShaderPass.js"></script>
<script src="libs/shaders/CopyShader.js"></script>
<script src="libs/shaders/SAOShader.js"></script>
<script src="libs/shaders/DepthLimitedBlurShader.js"></script>
<script src="libs/shaders/UnpackDepthRGBAShader.js"></script>
<script src="libs/renderers/CSS2DRenderer.js"></script>
<script src="libs/labels.js"></script>
<script src="hud.js"></script>
<script src="gui_manager.js"></script>
<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="w3-color-flat.css">
<link rel="stylesheet" href="main.css">

<body>

<div id='side_bar' style="display:none" class="w3-sidebar w3-bar-block w3-card w3-animate-left content">
    <button onclick="close_sidebar()" class="w3-bar-item w3-button w3-blue">Close &times;</button>
    <p> this is a side bar</p>
    <a href="#" class='fullWidth w3-button'>Link 1</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <a href="#" class='fullWidth w3-button'>Link 2</a>
    <div class='fullWidth w3-button content'>
        <span >title</span><input type='input' value =123 ></div>
    </div>
   
</div>


<div>
    <div>
        <button id="open_sidebar" onclick="open_sidebar()" class="w3-button w3-blue w3-xlarge float" >&#9776;</button>
    </div>
    <div id='overlay_div' class="overlayMessagePanel content" 
            style="width:300px; height:200px; margin-left:60px">
            
        <table class = 'chartText'>
            <tr>
                <td>Marker A</td>
                <td style="width:100px">
                    <div class='barChart' >
                        <div  style='width:30px; height:10px'>30</div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Marker B</td>
                <td>
                    <div class='barChart'>
                        <div  style='width:60px; height:10px'>60</div>
                    </div>
                </td>
            </tr>
            <tr>
                <td><span>Marker C</span></td>
                <td>
                    <div class='barChart'>
                        <div  style='width:50px; height:10px'>50</div>
                    </div>
                </td>
                
            </tr>
        </table>
        <p >
            line1 <br>
            line2 <br>
        </p>
    </div>
    <div id="threejs_container" style="height: 100%, top:0px" ></div>
</div>
            

    
</body>

<script>

    function open_sidebar(){
        //document.getElementById("threejs_container").style.marginLeft = "300px";
        document.getElementById("side_bar").style.width = "200px";
        document.getElementById("side_bar").style.display = "block";
        document.getElementById("open_sidebar").style.display = 'none';
        document.getElementById("overlay_div").style.marginLeft = '210px'
        this.onWindowResize()
        
    }
    function close_sidebar(){
        document.getElementById("threejs_container").style.marginLeft = "0%";
        document.getElementById("side_bar").style.display = "none";
        document.getElementById("open_sidebar").style.display = "inline-block";
        document.getElementById("overlay_div").style.marginLeft = '60px'
        this.onWindowResize()
    }

    //create 3d viewer
    var viewer=new Viewer();
    viewer.init();
    viewer.animate();

    // create object3d manager
    // and set the scene to be managed
    // the manager creates, edits and removes object3d from the scene
    var manager=viewer.manager
    
    
    // create interpretor
    // and set the manager, so that the parsed\
    // command directly calls methods from manager
    var inter=new Interpretor(viewer,manager);

    //create socketio and handling functions
    handle_connect=function(data){
        console.log('connected');
        viewer.clear_scene()
        socket.send('app.load_scene()')
        }

    handle_message=function(data){
        console.log('recieved:'+data)
        console.log(typeof(data))
        if(data.includes('[') && data.includes('{')){
            inter.parse_multiple(data)
        }
        
    }


    socket=io('http://localhost:5567/',false)
    socket.on('connect',handle_connect)
    socket.on('message',handle_message)
    //socket.send('hello server')

    function python(script){
        var data = {'cmd':'eval','script':script}
        var message = JSON.stringify(data)
        socket.send(message)
    }

    
    set_gui = function(parameters){
        var id = parameters['root']['id']
        console.log('app.set_gui', id,parameters)
        viewer.datgui.set_inspector(parameters, id)
        viewer.transformWidget.create(parameters['root'].value['Transform'].value, id)
    }


    sp = makeTextSprite('asdasd');
    viewer.scene.add(sp);
    sp.position.set(10,0,0);

    //test_bounding_widgets(viewer,w=10,d=10,h=4)

</script>
</html>