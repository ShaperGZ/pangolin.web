<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css"href="ArchProto.css">
</head>
<script src="three.js"></script>
<script src="controls/TrackballControls.js"></script>
<script src="controls/DragControls.js"></script>
<script src="controls/OrbitControls.js"></script>
<script src="interpretor.js"></script>
<script src="object_manager.js"></script>
<script src="threejsViewer.js"></script>
<body>
    <div id="threejs_container" style="width: 100%; height: 100%;"></div>
</body>

<script>
    console.log('haha');

    //create 3d viewer
    viewer=new Viewer();
    viewer.init();
    viewer.animate();

    // create object3d manager
    // and set the scene to be managed
    // the manager creates, edits and removes object3d from the scene
    manager=new ObjectManager(viewer.scene)

    // create interpretor
    // and set the manager, so that the parsed\
    // command directly calls methods from manager
    inter=new Interpretor(manager);

    //a test data from python
    message1= '{"cmd": "set_line", "data": {"g": {"p": [[0, 0, 0], [10, 0, 0], [10, 10, 5], [0, 0, 0]], "f": [], "id": 125446}, "s": {"color": [1, 0, 0]}}}'
    message2= '{"cmd": "set_line", "data": {"g": {"p": [[3, 3, 0], [13, 3, 0], [10, 10, 8], [3, 3, 0]], "f": [], "id": 125446}, "s": {"color": [1, 0, 1]}}}'
    id=inter.parse(message1)

    var objects=[manager.mapper[id]]
    var dragControls = new THREE.DragControls( objects, viewer.camera, viewer.renderer.domElement );
    dragControls.addEventListener( 'dragstart', function () {

        viewer.controls.enabled = false;

    } );
    dragControls.addEventListener( 'dragend', function () {

        viewer.controls.enabled = true;

    } );

    console.log(id)


</script>
</html>